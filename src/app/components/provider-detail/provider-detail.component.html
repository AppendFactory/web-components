<button (click)="closeDetail()">Volver</button>

@if (isLoading()) {
  <awc-loading-spinner></awc-loading-spinner>
} @else{
  @let prov = detalle();

  @if(prov){

    <div class="detalle-container">
  
      @if (prov.gallery.length && prov.type === 'Destacado') {
        <awc-image-slider
          [images]="prov.gallery"
          [autoSlide]="true"
          [interval]="4000">
        </awc-image-slider>
      } @else {
        <div class="imagen-principal">
        <img  class="imagen-principal"
          [src]="prov.thumbnail || prov.prv_image || 'https://via.placeholder.com/250x350?text=Sin+Imagen'" 
          alt="Imagen destacada">
      </div>
        
      }
  
      <h2>{{ prov.title }}</h2>
  
      <div class="etiquetas">
        @for (tag of prov.tags; track $index) {
          
            <span> {{ tag.charAt(0).toUpperCase() + tag.slice(1) }}@if($index < prov.tags.length - 1){,} </span>
        }
      </div>
  
      <div class="descripcion">
        <div>{{prov.description_full}}</div>
      </div>
  
      <div class="info-container">
        <div class="contacto">
          <h4>Contacto:</h4>
          <p><strong>Domicilio:</strong> {{ prov.address }}</p>
          <p><strong>Tel√©fono:</strong> {{ prov.phone }}</p>
          <p><strong>Email:</strong> {{ prov.email }}</p>
          <p><strong>Web:</strong> <a [href]="prov.website" target="_blank"> {{ prov.website }}</a></p>
          <p><strong>Tienda:</strong> <a [href]="prov.store" target="_blank"> {{ prov.store }}</a></p>

          @for(red of prov.social; track $index){
            <p><strong>{{red.id}}:</strong> <a [href]="red.url" target="_blank"> {{ red.url }}</a></p>
          }

          <p><strong>Horario:</strong> De {{ prov.time_open }} a {{ prov.time_close }}hs</p>
        </div>
        
        @if (prov.type === 'Destacado' && prov.lat && prov.lng) {
          @if(mapaUrl()){
            <div class="mapa">
              <iframe 
                width="100%" 
                height="300" 
                [src]="mapaUrl()"
                allowfullscreen
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade">
              </iframe>
            </div>
          }
          

        }
      </div>
  
    </div>

    @if(prov.type === 'Destacado' &&  prov.notas && prov.notas.length){
      <div class="notas">
        <h3>Notas</h3>
  
        @for (nota of prov.notas; track $index) {
          <div class="nota-card">
            <p class="nota-texto">{{ nota.texto }}</p>
            @if (nota.imagenes && nota.imagenes.length) {
              <div class="nota-imagenes">
                @for (img of nota.imagenes; track $index) {
                  <img [src]="img" alt="Imagen de nota">
                }
              </div>
            }
          </div>
        }
      </div>
    }

  }
}


